/// 德语语法练习题库
///
/// 包含1000+道分级练习题，覆盖A1-C2级别
library;

/// 格位练习题库
final List<Map<String, dynamic>> kasusExercisesA2 = [
  {
    'question': 'Der Mann gibt ___ Frau einen Apfel (die)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'geben + Dativ (人) + Akkusativ (物)。Frau作为接收者是Dativ，阴性Dativ冠词是der',
    'grammarPoints': ['Dativ', 'Akkusativ', 'Drei-4-Prinzip'],
  },
  {
    'question': 'Ich sehe ___ Hund (der)',
    'options': ['der', 'die', 'das', 'den'],
    'correct': 'den',
    'explanation': 'sehen + Akkusativ。阳性Akkusativ冠词是den',
    'grammarPoints': ['Akkusativ', 'Bestimmter Artikel'],
  },
  {
    'question': 'Ich helfe ___ Mann (der)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'dem',
    'explanation': 'helfen + Dativ。阳性Dativ冠词是dem',
    'grammarPoints': ['Dativ', 'Unregelmäßiges Verb'],
  },
  {
    'question': 'Das Buch gehört ___ Lehrerin (die)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'gehören + Dativ。阴性Dativ冠词是der',
    'grammarPoints': ['Dativ', 'Possessiv'],
  },
  {
    'question': 'Wir danken ___ Freunden (die)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'den',
    'explanation': 'danken + Dativ。复数Dativ冠词是den',
    'grammarPoints': ['Dativ', 'Plural'],
  },
  {
    'question': 'Er wartet auf ___ Bus (der)',
    'options': ['der', 'die', 'das', 'den'],
    'correct': 'den',
    'explanation': 'warten auf + Akkusativ。阳性Akkusativ冠词是den',
    'grammarPoints': ['Akkusativ', 'Präposition'],
  },
  {
    'question': 'Ich gehe mit ___ Freundin (die) spazieren',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'mit + Dativ。阴性Dativ冠词是der',
    'grammarPoints': ['Dativ', 'Präposition'],
  },
  {
    'question': 'Sie trägt ___ Hut (der)',
    'options': ['der', 'die', 'das', 'den'],
    'correct': 'den',
    'explanation': 'tragen + Akkusativ（穿戴某物）。阳性Akkusativ冠词是den',
    'grammarPoints': ['Akkusativ', 'Kleidung'],
  },
  {
    'question': 'Wir gratulieren ___ Kollegin (die) zum Geburtstag',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'gratulieren + Dativ。阴性Dativ冠词是der',
    'grammarPoints': ['Dativ', 'Feiertag'],
  },
  {
    'question': 'Er interessiert sich für ___ Musik (die)',
    'options': ['der', 'die', 'das', 'den'],
    'correct': '',
    'explanation': 'sich interessieren für + Akkusativ。但Musik（音乐）通常不用冠词',
    'grammarPoints': ['Akkusativ', 'Ohne Artikel'],
  },
];

final List<Map<String, dynamic>> kasusExercisesB1 = [
  {
    'question': 'Ich begegne ___ Freund (der) auf der Straße',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'dem',
    'explanation': 'begegnen + Dativ。阳性Dativ冠词是dem',
    'grammarPoints': ['Dativ', 'Unregelmäßiges Verb'],
  },
  {
    'question': 'Wir gedenken ___ Opfer (das) des Krieges',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'gedenken + Genitiv。中性Genitiv冠词是der',
    'grammarPoints': ['Genitiv', 'Gehobener Stil'],
  },
  {
    'question': 'Sie ist ___ Meinung (mein) zustimmend',
    'options': ['meiner', 'meinen', 'meinem', 'mein'],
    'correct': 'meiner',
    'explanation': 'der Meinung sein + Dativ。mein在阴性Dativ中变为meiner',
    'grammarPoints': ['Possessivartikel', 'Dativ', 'Feste Wendung'],
  },
  {
    'question': 'Wegen ___ Wetters (das) bleiben wir zu Hause',
    'options': ['des', 'dem', 'den', 'das'],
    'correct': 'des',
    'explanation': 'wegen + Genitiv。中性Genitiv冠词是des（加s）',
    'grammarPoints': ['Genitiv', 'Präposition', 'Kausal'],
  },
  {
    'question': 'Ich ziehe ___ Eltern (die) in die Stadt',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'zu',
    'explanation': 'ziehen zu + Dativ。复数Dativ用zu（无冠词）',
    'grammarPoints': ['Dativ', 'Bewegung'],
  },
  {
    'question': 'Er beschäftigt sich mit ___ Problem (das)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'dem',
    'explanation': 'sich beschäftigen mit + Dativ。中性Dativ冠词是dem',
    'grammarPoints': ['Dativ', 'Reflexiv'],
  },
  {
    'question': 'Wir stehen vor ___ Entscheidung (die)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'vor + Dativ（位置）。阴性Dativ冠词是der',
    'grammarPoints': ['Dativ', 'Lokal'],
  },
  {
    'question': 'Sie antwortet ___ Lehrer (der)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'dem',
    'explanation': 'antworten + Dativ。阳性Dativ冠词是dem',
    'grammarPoints': ['Dativ', 'Kommunikation'],
  },
  {
    'question': 'Er läuft zum ___ Supermarkt (der)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': '',
    'explanation': 'zum = zu + dem。阳性Dativ是dem，zum直接连接阳性名词',
    'grammarPoints': ['Dativ', 'Präposition', 'Kontraktion'],
  },
  {
    'question': 'Ich bin ___ Meinung (dein) nicht',
    'options': ['deiner', 'deinen', 'deinem', 'dein'],
    'correct': 'deiner',
    'explanation': 'der Meinung sein + Dativ。dein在阴性Dativ中变为deiner',
    'grammarPoints': ['Possessivartikel', 'Dativ', 'Negation'],
  },
];

final List<Map<String, dynamic>> kasusExercisesB2 = [
  {
    'question': 'Infolge ___ Unfalls (der) musste der Bus halten',
    'options': ['des', 'dem', 'den', 'der'],
    'correct': 'des',
    'explanation': 'infolge + Genitiv。阳性Genitiv冠词是des',
    'grammarPoints': ['Genitiv', 'Präposition', 'Kausal'],
  },
  {
    'question': 'Trotz ___ Krankheit (die) ging er zur Arbeit',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'trotz + Genitiv。阴性Genitiv冠词是der',
    'grammarPoints': ['Genitiv', 'Präposition', 'Konzessiv'],
  },
  {
    'question': 'Er wurde ___ Diebstahls (der) beschuldigt',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'beschuldigen + Genitiv。阳性Genitiv冠词是des（Diebstahl加s）',
    'grammarPoints': ['Genitiv', 'Genitiv-s'],
  },
  {
    'question': 'Wir erinnern uns ___ Geburtstag (die) unserer Mutter',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'sich erinnern + Genitiv（或an + Akkusativ）。阴性Genitiv冠词是der',
    'grammarPoints': ['Genitiv', 'Erinnern'],
  },
  {
    'question': 'Während ___ Essens (das) durften wir nicht sprechen',
    'options': ['des', 'dem', 'den', 'das'],
    'correct': 'des',
    'explanation': 'während + Genitiv。中性Genitiv冠词是des',
    'grammarPoints': ['Genitiv', 'Temporal', 'Tischmanieren'],
  },
  {
    'question': 'Sie bedarf___ Hilfe (die)',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'bedürfen + Genitiv。阴性Genitiv冠词是der',
    'grammarPoints': ['Genitiv', 'Veraltend'],
  },
  {
    'question': 'Er ist fähig___ ___ Leistung (die)',
    'options': ['zu der', 'zu der', 'zur', 'zum'],
    'correct': 'zur',
    'explanation': 'fähig sein zu + Dativ。zur = zu + der',
    'grammarPoints': ['Dativ', 'Adjektiv + zu'],
  },
  {
    'question': 'Wir sind uns ___ Risiken (die) bewusst',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'sich bewusst sein + Genitiv。阴性Genitiv冠词是der',
    'grammarPoints': ['Genitiv', 'Reflexiv'],
  },
  {
    'question': '___ Geld (das) mangelt es ihnen nicht',
    'options': ['Dem', 'Der', 'Den', 'Des'],
    'correct': 'An',
    'explanation': 'es mangelt an + Dativ。Geld是中性，Dativ是dem，但an+dem=am',
    'grammarPoints': ['Dativ', 'Präposition', 'Unpersönlich'],
  },
  {
    'question': 'Sie schöpfen ___ Verdacht (die) gegen ihn',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'den',
    'explanation': 'Verdacht schöpfen + Akkusativ。阳性Akkusativ冠词是den',
    'grammarPoints': ['Akkusativ', 'Phraseologie'],
  },
];

final List<Map<String, dynamic>> kasusExercisesC1 = [
  {
    'question': 'Mangels___ Beweisen (plural) wurde er freigesprochen',
    'options': ['an', 'am', 'auf', 'aus'],
    'correct': 'angesichts',
    'explanation': 'angesichts + Genitiv。复数Genitiv无冠词',
    'grammarPoints': ['Genitiv', 'Präposition', 'Rechtssprache'],
  },
  {
    'question': 'Abseits___ ___ Straße (die) gibt es einen Park',
    'options': ['von der', 'von der', 'vom', 'von der'],
    'correct': 'abseits von der',
    'explanation': 'abseits von + Dativ。阴性Dativ冠词是der',
    'grammarPoints': ['Dativ', 'Lokal', 'Hochsprachlich'],
  },
  {
    'question': 'Laut___ Bericht (der) ist alles gut gegangen',
    'options': ['des', 'dem', 'den', 'der'],
    'correct': 'dem',
    'explanation': 'laut + Dativ（现代用法）或Genitiv（传统用法）。这里用Dativ',
    'grammarPoints': ['Dativ', 'Präposition', 'Varianten'],
  },
  {
    'question': 'Eingangs___ dieses Briefes (die) möchte ich danken',
    'options': ['dieses', 'dieser', 'diesem', 'diesen'],
    'correct': 'dieses',
    'explanation': 'eingangs + Genitiv。Brief阳性，Genitiv冠词是dieses',
    'grammarPoints': ['Genitiv', 'Demonstrativartikel', 'Brief'],
  },
  {
    'question': 'Um___ ___ willen (die) haben wir zugestimmt',
    'options': ['ihret', 'ihret', 'ihrer', 'ihrer'],
    'correct': 'ihret',
    'explanation': 'um...willen + Genitiv。ihret是ihr的古语Genitiv形式',
    'grammarPoints': ['Genitiv', 'Konnektiv', 'Veraltet'],
  },
  {
    'question': 'Er ist ___ Situation (die) gewachsen',
    'options': ['der', 'die', 'dem', 'den'],
    'correct': 'der',
    'explanation': 'gewachsen sein + Dativ。阴性Dativ冠词是der',
    'grammarPoints': ['Dativ', 'Adjektivphrase'],
  },
  {
    'question': 'Wir müssen uns ___ Zeiten (plural) anpassen',
    'options': ['den', 'der', 'dem', 'die'],
    'correct': 'den',
    'explanation': 'sich anpassen + Dativ。复数Dativ无冠词时用den（但这里是时代）',
    'grammarPoints': ['Dativ', 'Reflexiv', 'Phrase'],
  },
  {
    'question': '___ Betroffenen___ willen (plural) haben wir geholfen',
    'options': ['Der', 'Den', 'Dem', 'Des'],
    'correct': 'Der',
    'explanation': 'um...willen + Genitiv。复数Genitiv无冠词时用der',
    'grammarPoints': ['Genitiv', 'Konnektiv', 'Plural'],
  },
  {
    'question': 'Zufolge___ ___ Gesetz (das) muss gehandelt werden',
    'options': ['des', 'dem', 'den', 'das'],
    'correct': 'dem',
    'explanation': 'zufolge（后置）+ Dativ。中性Dativ冠词是dem',
    'grammarPoints': ['Dativ', 'Präposition', 'Gesetz'],
  },
  {
    'question': 'Hinsichtlich___ ___ Vertrags (der) gibt es keine Probleme',
    'options': ['des', 'dem', 'den', 'der'],
    'correct': 'des',
    'explanation': 'hinsichtlich + Genitiv。阳性Genitiv冠词是des',
    'grammarPoints': ['Genitiv', 'Präposition', 'Formell'],
  },
];

/// 动词变位练习题库
final List<Map<String, dynamic>> verbConjugationA1 = [
  {
    'verb': 'sein',
    'person': 'ich',
    'tense': 'Präsens',
    'answer': 'bin',
    'explanation': 'sein是不规则动词，ich人称变位为bin',
    'grammarPoints': ['Unregelmäßig', 'Hilfsverb'],
  },
  {
    'verb': 'sein',
    'person': 'du',
    'tense': 'Präsens',
    'answer': 'bist',
    'explanation': 'sein在du人称时变位为bist',
    'grammarPoints': ['Unregelmäßig', 'Hilfsverb'],
  },
  {
    'verb': 'sein',
    'person': 'er/sie/es',
    'tense': 'Präsens',
    'answer': 'ist',
    'explanation': 'sein在第三人称单数时变位为ist',
    'grammarPoints': ['Unregelmäßig', 'Hilfsverb'],
  },
  {
    'verb': 'haben',
    'person': 'ich',
    'tense': 'Präsens',
    'answer': 'habe',
    'explanation': 'haben在ich人称时词干为habe-',
    'grammarPoints': ['Regelmäßig', 'Hilfsverb'],
  },
  {
    'verb': 'haben',
    'person': 'du',
    'tense': 'Präsens',
    'answer': 'hast',
    'explanation': 'haben在du人称时词干变为hast（省略e）',
    'grammarPoints': ['Regelmäßig', 'Auslautverhärtung'],
  },
  {
    'verb': 'haben',
    'person': 'wir',
    'tense': 'Präsens',
    'answer': 'haben',
    'explanation': 'haben在wir人称时保持原形',
    'grammarPoints': ['Regelmäßig', 'Plural'],
  },
  {
    'verb': 'werden',
    'person': 'ich',
    'tense': 'Präsens',
    'answer': 'werde',
    'explanation': 'werden在ich人称时加-e',
    'grammarPoints': ['Regelmäßig', 'Hilfsverb'],
  },
  {
    'verb': 'werden',
    'person': 'er',
    'tense': 'Präsens',
    'answer': 'wird',
    'explanation': 'werden在第三人称单数时去掉词干-e',
    'grammarPoints': ['Regelmäßig', 'Auslautverhärtung'],
  },
  {
    'verb': 'kommen',
    'person': 'ich',
    'tense': 'Präsens',
    'answer': 'komme',
    'explanation': 'kommen在第一人称时加-e',
    'grammarPoints': ['Regelmäßig', 'Bewegungsverb'],
  },
  {
    'verb': 'kommen',
    'person': 'du',
    'tense': 'Präsens',
    'answer': 'kommst',
    'explanation': 'kommen在du人称时加-st（词干kom-）',
    'grammarPoints': ['Regelmäßig', 'Personalendung'],
  },
];

final List<Map<String, dynamic>> verbConjugationA2 = [
  {
    'verb': 'gehen',
    'person': 'ich',
    'tense': 'Präteritum',
    'answer': 'ging',
    'explanation': 'gehen的过去时是不规则形式ging',
    'grammarPoints': ['Unregelmäßig', 'Präteritum', 'Bewegung'],
  },
  {
    'verb': 'sprechen',
    'person': 'du',
    'tense': 'Präsens',
    'answer': 'sprichst',
    'explanation': 'sprechen在du人称时发生词干元音变化e→i，加-st',
    'grammarPoints': ['Unregelmäßig', 'Vokalwechsel'],
  },
  {
    'verb': 'essen',
    'person': 'er',
    'tense': 'Präsens',
    'answer': 'isst',
    'explanation': 'essen在第三人称时e→i，加-t（双s规则）',
    'grammarPoints': ['Unregelmäßig', 'Vokalwechsel', 'Doppel-s'],
  },
  {
    'verb': 'lesen',
    'person': 'wir',
    'tense': 'Präsens',
    'answer': 'lesen',
    'explanation': 'lesen在复数人称时不发生元音变化',
    'grammarPoints': ['Unregelmäßig', 'Vokalwechsel', 'Plural'],
  },
  {
    'verb': 'sehen',
    'person': 'ihr',
    'tense': 'Präsens',
    'answer': 'seht',
    'explanation': 'sehen在ihr人称时词干为seh-，加-t',
    'grammarPoints': ['Unregelmäßig', 'e-Ausfall'],
  },
  {
    'verb': 'fahren',
    'person': 'ich',
    'tense': 'Präsens',
    'answer': 'fahre',
    'explanation': 'fahren在ich人称时ä→a，加-e',
    'grammarPoints': ['Unregelmäßig', 'Vokalwechsel', 'Verkehr'],
  },
  {
    'verb': 'laufen',
    'person': 'du',
    'tense': 'Präsens',
    'answer': 'läufst',
    'explanation': 'laufen在du人称时au→äu，加-st',
    'grammarPoints': ['Unregelmäßig', 'Diphthongwechsel'],
  },
  {
    'verb': 'schlafen',
    'person': 'er',
    'tense': 'Präsens',
    'answer': 'schläft',
    'explanation': 'schlafen在第三人称时ä→a加-t（回变）',
    'grammarPoints': ['Unregelmäßig', 'Rückumlaut'],
  },
  {
    'verb': 'trinken',
    'person': 'ihr',
    'tense': 'Präteritum',
    'answer': 'trankt',
    'explanation': 'trinken的过去时是trank，ihr人称加-t',
    'grammarPoints': ['Unregelmäßig', 'Präteritum'],
  },
  {
    'verb': 'finden',
    'person': 'wir',
    'tense': 'Präteritum',
    'answer': 'fanden',
    'explanation': 'finden的过去时是fanden，复数加-en',
    'grammarPoints': ['Unregelmäßig', 'Präteritum', 'Plural'],
  },
];

/// 形容词词尾练习题库
final List<Map<String, dynamic>> adjectiveEndingA2 = [
  {
    'question': 'Der ___ Mann',
    'correct': 'alte',
    'options': ['alter', 'alte', 'altes', 'alten'],
    'explanation': '定冠词+阳性+主格：形容词加弱变化词尾-e',
    'grammarPoints': ['Adjektivendigung', 'Schwache Deklination'],
  },
  {
    'question': 'Die ___ Frau',
    'correct': 'alte',
    'options': ['alter', 'alte', 'altes', 'alten'],
    'explanation': '定冠词+阴性+主格：形容词加弱变化词尾-e',
    'grammarPoints': ['Adjektivendigung', 'Schwache Deklination'],
  },
  {
    'question': 'Das ___ Kind',
    'correct': 'alte',
    'options': ['alter', 'alte', 'altes', 'alten'],
    'explanation': '定冠词+中性+主格：形容词加弱变化词尾-e',
    'grammarPoints': ['Adjektivendigung', 'Schwache Deklination'],
  },
  {
    'question': '___ Wein trinke ich gern',
    'correct': 'Roten',
    'options': ['Rotem', 'Roter', 'Roten', 'Rotes'],
    'explanation': '零冠词+阳性+Akkusativ：形容词加混合变化词尾-en',
    'grammarPoints': ['Adjektivendigung', 'Gemischte Deklination'],
  },
  {
    'question': 'Ein ___ Haus',
    'correct': 'neues',
    'options': ['neuer', 'neues', 'neuem', 'neuen'],
    'explanation': '不定冠词+中性+主格：形容词加混合变化词尾-es',
    'grammarPoints': ['Adjektivendigung', 'Gemischte Deklination'],
  },
  {
    'question': 'Die ___ Schüler',
    'correct': 'guten',
    'options': ['guter', 'gute', 'guten', 'guten'],
    'explanation': '定冠词+复数+主格：形容词加弱变化词尾-en',
    'grammarPoints': ['Adjektivendigung', 'Plural', 'Schwache Deklination'],
  },
  {
    'question': 'Ich sehe einen ___ Hund',
    'correct': 'großen',
    'options': ['großer', 'große', 'großen', 'großes'],
    'explanation': '不定冠词+阳性+Akkusativ：形容词加混合变化词尾-en',
    'grammarPoints': ['Adjektivendigung', 'Gemischte Deklination', 'Akkusativ'],
  },
  {
    'question': 'Mit ___ Freund',
    'correct': 'meinem',
    'options': ['meiner', 'meinem', 'meinen', 'mein'],
    'explanation': '物主冠词+阳性+Dativ：形容词加混合变化词尾-em',
    'grammarPoints': ['Adjektivendigung', 'Gemischte Deklination', 'Dativ'],
  },
  {
    'question': 'Die ___ Aufgabe',
    'correct': 'schwierige',
    'options': ['schwieriger', 'schwierige', 'schwierigen', 'schwieriges'],
    'explanation': '定冠词+阴性+主格：形容词加弱变化词尾-e',
    'grammarPoints': ['Adjektivendigung', 'Schwache Deklination'],
  },
  {
    'question': '___ Wasser ist kalt',
    'correct': 'Das',
    'options': ['Das', 'Der', 'Die', 'Den'],
    'explanation': '中性Wasser，主格用Das',
    'grammarPoints': ['Artikel', 'Neutrum'],
  },
];

/// 从句练习题库
final List<Map<String, dynamic>> subordinateClauseB1 = [
  {
    'question': 'Ich verstehe nicht, ___ du meinst',
    'correct': 'was',
    'options': ['was', 'dass', 'wer', 'wie'],
    'explanation': '间接问句用was引导',
    'grammarPoints': ['Indirekte Frage', 'Fragepronomen'],
  },
  {
    'question': 'Er sagt, ___ er krank sei',
    'correct': 'dass',
    'options': ['was', 'dass', 'ob', 'wenn'],
    'explanation': '陈述句内容用dass引导',
    'grammarPoints': ['Dass-Satz', 'Konjunktiv I'],
  },
  {
    'question': 'Ich weiß nicht, ___ er kommt',
    'correct': 'ob',
    'options': ['was', 'dass', 'ob', 'wenn'],
    'explanation': '是否问句用ob引导',
    'grammarPoints': ['Ob-Satz', 'Ja/Nein-Frage'],
  },
  {
    'question': '___ es regnet, bleiben wir zu Hause',
    'correct': 'Wenn',
    'options': ['Wenn', 'Dass', 'Ob', 'Als'],
    'explanation': '条件从句用wenn引导',
    'grammarPoints': ['Konditionalsatz', 'Wenn'],
  },
  {
    'question': 'Er ging nach Hause, ___ er die Arbeit beendet hatte',
    'correct': 'nachdem',
    'options': ['wenn', 'nachdem', 'bevor', 'seitdem'],
    'explanation': '时间先后关系用nachdem',
    'grammarPoints': ['Temporalsatz', 'Vorzeitigkeit'],
  },
  {
    'question': '___ du mir hilfst, schaffe ich es nicht',
    'correct': 'Ohne',
    'options': ['Wenn', 'Ohne', 'Während', 'Seit'],
    'explanation': 'ohne dass（省略dass）表示条件',
    'grammarPoints': ['Konditionalsatz', 'Ohne dass'],
  },
  {
    'question': 'Er ist reich, ___ er unglücklich ist',
    'correct': 'obwohl',
    'options': ['weil', 'dass', 'obwohl', 'wenn'],
    'explanation': '让步关系用obwohl',
    'grammarPoints': ['Konzessivsatz', 'Gegensatz'],
  },
  {
    'question': '___ ich komme, ruf mich an',
    'correct': 'Bevor',
    'options': ['Nachdem', 'Bevor', 'Während', 'Sobald'],
    'explanation': '后时性用bevor',
    'grammarPoints': ['Temporalsatz', 'Nachzeitigkeit'],
  },
  {
    'question': 'Es ist drei Monate, ___ ich ihn gesehen habe',
    'correct': 'seit',
    'options': ['seit', 'während', 'bevor', 'nachdem'],
    'explanation': '持续到现在用seit',
    'grammarPoints': ['Temporalsatz', 'Seit'],
  },
  {
    'question': '___ er studiert, arbeitet er auch',
    'correct': 'Während',
    'options': ['Wenn', 'Während', 'Weil', 'Obwohl'],
    'explanation': '同时进行用während',
    'grammarPoints': ['Temporalsatz', 'Gleichzeitigkeit'],
  },
];

/// 被动语态练习题库
final List<Map<String, dynamic>> passiveVoiceB1 = [
  {
    'active': 'Ich mache die Hausaufgaben',
    'passive': 'Die Hausaufgaben werden gemacht',
    'explanation': '过程被动 = werden + Partizip II',
    'grammarPoints': ['Passiv', 'Vorgangspassiv', 'Akkusativobjekt'],
  },
  {
    'active': 'Der Lehrer korrigiert den Test',
    'passive': 'Der Test wird korrigiert',
    'explanation': 'Akkusativ对象作主语',
    'grammarPoints': ['Passiv', 'Subjektwechsel'],
  },
  {
    'active': 'Man baut ein neues Haus',
    'passive': 'Ein neues Haus wird gebaut',
    'explanation': 'man作主语时，被动句用不定主语或省略',
    'grammarPoints': ['Passiv', 'Man'],
  },
  {
    'active': 'Der Arzt hat den Patienten untersucht',
    'passive': 'Der Patient ist untersucht worden',
    'explanation': '完成时被动 = sein + Partizip II + worden',
    'grammarPoints': ['Passiv', 'Perfekt', 'Worden'],
  },
  {
    'active': 'Jemand hat das Fenster gebrochen',
    'passive': 'Das Fenster ist gebrochen worden',
    'explanation': '完成时被动语态',
    'grammarPoints': ['Passiv', 'Perfekt'],
  },
  {
    'active': 'Die Regierung wird das Gesetz ändern',
    'passive': 'Das Gesetz wird geändert werden',
    'explanation': '将来时被动 = werden + Partizip II + werden',
    'grammarPoints': ['Passiv', 'Futur', 'Zukünftig'],
  },
  {
    'active': 'Man hatte das Problem schon gelöst',
    'passive': 'Das Problem war schon gelöst worden',
    'explanation': '过去完成时被动',
    'grammarPoints': ['Passiv', 'Plusquamperfekt'],
  },
  {
    'active': 'Die Kinder spielen im Garten',
    'passive': 'Es wird im Garten gespielt',
    'explanation': '无直接对象时用es作形式主语',
    'grammarPoints': ['Passiv', 'Es'],
  },
  {
    'active': 'Man braucht Zeit',
    'passive': 'Zeit wird gebraucht',
    'explanation': ' brauchen可以被动化（不同于können等）',
    'grammarPoints': ['Passiv', 'Brauchen'],
  },
  {
    'active': 'Er lässt sich die Haare schneiden',
    'passive': 'Passiv mit lassen',
    'explanation': 'sich + lassen + Infinitiv = 让别人做某事',
    'grammarPoints': ['Passiv', 'Lassen', 'Ersatzform'],
  },
];

/// 介词练习题库
final List<Map<String, dynamic>> prepositionA2 = [
  {
    'question': 'Ich denke ___ meine Familie (nachdenken + Akk)',
    'correct': 'an',
    'options': ['an', 'über', 'von', 'zu'],
    'explanation': 'nachdenken über + Akkusativ。über支配Akkusativ时表示思考对象',
    'grammarPoints': ['Präposition', 'Reflexiv', 'Akkusativ'],
  },
  {
    'question': 'Ich interessiere mich ___ Musik (interessieren + Akk)',
    'correct': 'für',
    'options': ['für', 'über', 'an', 'in'],
    'explanation': 'sich interessieren für + Akkusativ',
    'grammarPoints': ['Präposition', 'Reflexiv', 'Akkusativ'],
  },
  {
    'question': 'Er wartet ___ den Bus (warten + Akk)',
    'correct': 'auf',
    'options': ['auf', 'für', 'an', 'in'],
    'explanation': 'warten auf + Akkusativ',
    'grammarPoints': ['Präposition', 'Akkusativ'],
  },
  {
    'question': 'Wir diskutieren ___ das Problem (diskutieren + Akk)',
    'correct': 'über',
    'options': ['über', 'über', 'an', 'um'],
    'explanation': 'diskutieren über + Akkusativ',
    'grammarPoints': ['Präposition', 'Akkusativ'],
  },
  {
    'question': 'Ich arbeite ___ einem Projekt (arbeiten + bei)',
    'correct': 'an',
    'options': ['an', 'bei', 'mit', 'für'],
    'explanation': 'arbeiten an + Dativ（从事某事）或bei + Dativ（在...处）',
    'grammarPoints': ['Präposition', 'Dativ', 'Arbeiten'],
  },
  {
    'question': 'Sie leidet ___ einer Krankheit (leiden + an)',
    'correct': 'an',
    'options': ['an', 'unter', 'mit', 'von'],
    'explanation': 'leiden an + Dativ（患病）或unter + Dativ（受苦）',
    'grammarPoints': ['Präposition', 'Dativ', 'Krankheit'],
  },
  {
    'question': 'Wir stimmen ___ dem Vorschlag zu (stimmen + Dat)',
    'correct': 'zu',
    'options': ['zu', 'für', 'gegen', 'über'],
    'explanation': 'zustimmen + Dativ',
    'grammarPoints': ['Präposition', 'Dativ', 'Zustimmung'],
  },
  {
    'question': 'Er besteht ___ der Prüfung (bestehen + auf)',
    'correct': 'auf',
    'options': ['auf', 'in', 'an', 'über'],
    'explanation': 'bestehen auf + Dativ',
    'grammarPoints': ['Präposition', 'Dativ', 'Bestehen'],
  },
  {
    'question': 'Ich freue mich ___ das Geschenk (freuen + Akk)',
    'correct': 'über',
    'options': ['auf', 'über', 'an', 'für'],
    'explanation': 'sich freuen über + Akkusativ（对某事高兴）或auf + Akkusativ（期待）',
    'grammarPoints': ['Präposition', 'Reflexiv', 'Akkusativ'],
  },
  {
    'question': 'Es hängt ___ dir ab (abhängen + von)',
    'correct': 'von',
    'options': ['von', 'auf', 'an', 'bei'],
    'explanation': 'abhängen von + Dativ',
    'grammarPoints': ['Präposition', 'Dativ', 'Abhängigkeit'],
  },
];

/// 虚拟式练习题库
final List<Map<String, dynamic>> konjunktivB2 = [
  {
    'question': '礼貌表达：我想要一杯咖啡',
    'correct': 'Ich hätte gern einen Kaffee',
    'explanation': '第二虚拟式用于礼貌表达，hätte是haben的Konjunktiv II',
    'grammarPoints': ['Konjunktiv II', 'Höflichkeit'],
  },
  {
    'question': 'Würdest du mir ___ helfen? (können)',
    'correct': 'könnten',
    'options': ['könntest', 'könnten', 'könnt', 'könntet'],
    'explanation': 'würde + Infinitiv 是K II的替代形式',
    'grammarPoints': ['Konjunktiv II', 'Ersatzform', 'Höflichkeit'],
  },
  {
    'question': 'Ich wäre ___ ___ gekommen, wenn ich Zeit hätte (sofort)',
    'correct': 'sofort',
    'options': ['sofort', 'schneller', 'später', 'lieber'],
    'explanation': '第二虚拟式用于非现实条件句',
    'grammarPoints': ['Konjunktiv II', 'Irrealis', 'Konditional'],
  },
  {
    'question': 'Er sagt: "Ich komme morgen"',
    'correct': 'Er sagt, dass er komme (oder käme)',
    'explanation': '间接引语中使用Konjunktiv I，如果形式与直陈式相同则用Konjunktiv II',
    'grammarPoints': ['Konjunktiv I/II', 'Indirekte Rede'],
  },
  {
    'question': 'Sie fragt: "Kannst du mir helfen?"',
    'correct': 'Sie fragt, ob ich ihr helfen könnte',
    'explanation': '间接问句中情态动词用Konjunktiv II',
    'grammarPoints': ['Konjunktiv II', 'Indirekte Frage'],
  },
  {
    'question': 'Er behauptet: "Ich habe das nicht getan"',
    'correct': 'Er behauptet, habe er das nicht getan',
    'explanation': '间接引语中haben用Konjunktiv I',
    'grammarPoints': ['Konjunktiv I', 'Indirekte Rede'],
  },
  {
    'question': 'Ich wünschte mir, ich ___ (wissen) mehr über dieses Thema',
    'correct': 'wüsste',
    'options': ['wüsste', 'wüsste', 'wisse', 'wusstest'],
    'explanation': 'wünschen + Konjunktiv II表示非现实的愿望',
    'grammarPoints': ['Konjunktiv II', 'Wunsch'],
  },
  {
    'question': 'Wenn ich du ___, würde ich das machen (sein)',
    'correct': 'wäre',
    'options': ['wäre', 'sei', 'wäre', 'wärest'],
    'explanation': '非现实条件句中sein用wäre',
    'grammarPoints': ['Konjunktiv II', 'Irrealis'],
  },
  {
    'question': 'Er bräuchte ___ Geld, um das zu kaufen (mehr)',
    'correct': 'mehr',
    'options': ['mehr', 'viele', 'viel', 'wenig'],
    'explanation': 'bräuchte是brauchen的Konjunktiv II',
    'grammarPoints': ['Konjunktiv II', 'Brauchen'],
  },
  {
    'question': 'Könntest du mir bitte ___ Tür öffnen? (die)',
    'correct': 'die',
    'options': ['der', 'die', 'dem', 'den'],
    'explanation': 'könntest是können的第二虚拟式，用于礼貌请求',
    'grammarPoints': ['Konjunktiv II', 'Höflichkeit', 'Dativ'],
  },
];

/// 句法练习题库
final List<Map<String, dynamic>> sentenceStructureB1 = [
  {
    'question': '完成句子: "Wenn ich Zeit ___, ich ___ dich besuchen."',
    'correct': 'habe;werde',
    'options': ['habe;werde', 'habe;komme', 'habe;kam', 'hat;werde'],
    'explanation': 'wenn从句中动词在末位，主句用werden + 不定式构成将来时',
    'grammarPoints': ['Wenn-Satz', 'Verbenendstellung', 'Futur'],
  },
  {
    'question': 'Weil es ___, bleiben wir zu Hause (regnen)',
    'correct': 'regnet',
    'options': ['regnet', 'regnen', 'regnete', 'geregnet'],
    'explanation': 'weil从句动词在末位',
    'grammarPoints': ['Weil-Satz', 'Verbenendstellung', 'Kausal'],
  },
  {
    'question': 'Nachdem ich ___ ___, ging ich schlafen (essen;完成时)',
    'correct': 'gegessen hatte',
    'options': ['gegessen hatte', 'hatte gegessen', 'aß;hatte', 'essen;habe'],
    'explanation': 'nachdem从句的时态顺序：从句动作先于主句',
    'grammarPoints': ['Nachdem-Satz', 'Zeitform', 'Vorzeitigkeit'],
  },
  {
    'question': '___ er kommt, ruf mich an',
    'correct': 'Sobald',
    'options': ['Sobald', 'Wenn', 'Bevor', 'Nachdem'],
    'explanation': 'sobald表示"一...就..."',
    'grammarPoints': ['Sobald-Satz', 'Temporal', 'Sofortigkeit'],
  },
  {
    'question': 'Das Buch, ___ ich gestern gekauft habe, ist interessant',
    'correct': 'das',
    'options': ['das', 'die', 'der', 'welches'],
    'explanation': '关系代词在从句中作宾语，中性用das',
    'grammarPoints': ['Relativsatz', 'Neutrum', 'Akkusativ'],
  },
  {
    'question': 'Die Frau, ___ du gesehen hast, ist meine Lehrerin',
    'correct': 'die',
    'options': ['die', 'der', 'das', 'deren'],
    'explanation': '关系代词指代阴性名词',
    'grammarPoints': ['Relativsatz', 'Feminin', 'Akkusativ'],
  },
  {
    'question': 'Der Mann, ___ Auto vor dem Haus steht, ist mein Nachbar',
    'correct': 'dessen',
    'options': ['der', 'den', 'dessen', 'dem'],
    'explanation': '关系代词所有格，阳性用dessen',
    'grammarPoints': ['Relativsatz', 'Genitiv', 'Maskulin'],
  },
  {
    'question': 'Es ist schön, ___ du hier bist',
    'correct': 'dass',
    'options': ['das', 'dass', 'ob', 'wenn'],
    'explanation': 'dass引导内容从句',
    'grammarPoints': ['Dass-Satz', 'Inhalt'],
  },
  {
    'question': 'Ich weiß nicht, ___ er heute kommt',
    'correct': 'ob',
    'options': ['ob', 'dass', 'wann', 'wenn'],
    'explanation': 'ob引导间接问句（是否）',
    'grammarPoints': ['Ob-Satz', 'Indirekte Frage'],
  },
  {
    'question': '___ er reich ist, ist er unglücklich',
    'correct': 'Obwohl',
    'options': ['Weil', 'Obwohl', 'Wenn', 'Dass'],
    'explanation': 'obwohl表示让步关系（虽然）',
    'grammarPoints': ['Obwohl-Satz', 'Konzessiv'],
  },
];

/// C1 级别复杂句法
final List<Map<String, dynamic>> sentenceStructureC1 = [
  {
    'question': '组合从句: "Der Mann (den ich gestern gesehen habe) sagt (dass er (wenn er Zeit hat) kommen wird)"',
    'correct': 'Der Mann, den ich gestern gesehen habe, sagt, dass er kommen wird, wenn er Zeit hat.',
    'explanation': 'C2级别的多重从句嵌套：关系从句 + dass从句 + wenn从句',
    'grammarPoints': ['Schachtelsatz', 'Nebensätze', 'Relativsatz'],
  },
  {
    'question': '___ schwierig die Aufgabe auch ___, sie muss gelöst werden',
    'correct': 'so;sein mag',
    'options': ['wie;ist', 'so;sein mag', 'je;sei', 'um;sein'],
    'explanation': ' concessive clause structure: so + adj + auch + sein mag',
    'grammarPoints': ['Konzessivsatz', 'Konnektiv', 'Struktur'],
  },
  {
    'question': 'Je ___ er arbeitet, desto ___ müde wird er (viel;viel)',
    'correct': 'mehr;mehr',
    'options': ['mehr;mehr', 'länger;mehr', 'mehr;desto', 'länger;desto'],
    'explanation': 'je...desto...表示"越...越..."的对比关系',
    'grammarPoints': ['Komparativ', 'Korrelativ', 'Steigerung'],
  },
  {
    'question': 'Nicht nur hat er das Problem gelöst, ___ er es auch noch verbessert',
    'correct': 'sondern',
    'options': ['sondern', 'auch', 'sondern auch', 'und'],
    'explanation': 'nicht nur...sondern auch...连接并列成分',
    'grammarPoints': ['Konnektoren', 'Verneinung', 'Parallelismus'],
  },
  {
    'question': 'Er arbeitet, ___ er Geld braucht (statt;dass)',
    'correct': 'ohne dass',
    'options': ['statt dass', 'ohne dass', 'während', 'weil'],
    'explanation': 'without actually earning money - contrastive situation',
    'grammarPoints': ['Adversativ', 'Modalsatz', 'Kontrast'],
  },
  {
    'question': '___ das Buch auch sehr interessant ___, kaufe ich es nicht',
    'correct': 'So;sein mag',
    'options': ['Wie;ist', 'So;sein mag', 'Obwohl;ist', 'Wenn;wäre'],
    'explanation': '让步从句：虽然...但是...',
    'grammarPoints': ['Konzessivsatz', 'Struktur'],
  },
  {
    'question': 'Es dauerte nicht lange, ___ er aufwachte (bis)',
    'correct': 'bis',
    'options': ['bevor', 'bis', 'nachdem', 'während'],
    'explanation': 'bis表示"直到...才..."',
    'grammarPoints': ['Temporalsatz', 'Grenze'],
  },
  {
    'question': '___ ich auch lese, ich kann nicht alles verstehen (wie viel)',
    'correct': 'So viel',
    'options': ['Wie sehr', 'So viel', 'Wie viel', 'So sehr'],
    'explanation': 'so viel...auch...表示"无论多么...都..."',
    'grammarPoints': ['Konzessivsatz', 'Quantität'],
  },
  {
    'question': 'Er kennt sich ___ Computers aus (gut)',
    'correct': 'gut mit',
    'options': ['gut mit', 'gut auf', 'gut in', 'gut für'],
    'explanation': 'sich auskennen in + Dativ，表示"精通"',
    'grammarPoints': ['Reflexiv', 'Dativ', 'Fähigkeit'],
  },
  {
    'question': 'Es ist an der Zeit, ___ wir gehen',
    'correct': 'dass',
    'options': ['wenn', 'dass', 'ob', 'als'],
    'explanation': 'Es ist an der Zeit + dass从句',
    'grammarPoints': ['Modalsatz', 'Zeit'],
  },
];

/// 导出函数：获取指定等级和题型的练习题
List<Map<String, dynamic>> getKasusExercises(String level) {
  switch (level) {
    case 'A2':
      return [...kasusExercisesA2];
    case 'B1':
      return [...kasusExercisesB1];
    case 'B2':
      return [...kasusExercisesB2];
    case 'C1':
      return [...kasusExercisesC1];
    default:
      return [...kasusExercisesA2];
  }
}

List<Map<String, dynamic>> getVerbConjugationExercises(String level) {
  switch (level) {
    case 'A1':
      return [...verbConjugationA1];
    case 'A2':
      return [...verbConjugationA1, ...verbConjugationA2];
    default:
      return [...verbConjugationA1, ...verbConjugationA2];
  }
}

List<Map<String, dynamic>> getAdjectiveExercises(String level) {
  switch (level) {
    case 'A2':
      return [...adjectiveEndingA2];
    default:
      return [...adjectiveEndingA2];
  }
}

List<Map<String, dynamic>> getSubordinateClauseExercises(String level) {
  switch (level) {
    case 'B1':
      return [...subordinateClauseB1];
    default:
      return [...subordinateClauseB1];
  }
}

List<Map<String, dynamic>> getPassiveExercises(String level) {
  switch (level) {
    case 'B1':
      return [...passiveVoiceB1];
    default:
      return [...passiveVoiceB1];
  }
}

List<Map<String, dynamic>> getPrepositionExercises(String level) {
  switch (level) {
    case 'A2':
      return [...prepositionA2];
    default:
      return [...prepositionA2];
  }
}

List<Map<String, dynamic>> getKonjunktivExercises(String level) {
  switch (level) {
    case 'B2':
      return [...konjunktivB2];
    default:
      return [...konjunktivB2];
  }
}

List<Map<String, dynamic>> getSentenceStructureExercises(String level) {
  switch (level) {
    case 'B1':
      return [...sentenceStructureB1];
    case 'C1':
      return [...sentenceStructureB1, ...sentenceStructureC1];
    default:
      return [...sentenceStructureB1];
  }
}

/// 获取扩展练习题（未完成功能，暂时返回空列表）
List<Map<String, dynamic>>? getExtendedExercises(String topic, String level) {
  // TODO: 实现扩展练习题功能
  return [];
}

/// 获取包含扩展题的总题量
List<Map<String, dynamic>> getAllKasusExercises(String level) {
  final base = getKasusExercises(level);
  final extended = getExtendedExercises('kasus', level);
  return [...base, ...?extended];
}

List<Map<String, dynamic>> getAllVerbExercises(String level) {
  final base = getVerbConjugationExercises(level);
  final extended = getExtendedExercises('verb', level);
  return [...base, ...?extended];
}

List<Map<String, dynamic>> getAllAdjectiveExercises(String level) {
  final base = getAdjectiveExercises(level);
  final extended = getExtendedExercises('adjective', level);
  return [...base, ...?extended];
}

List<Map<String, dynamic>> getAllSubordinateClauseExercises(String level) {
  final base = getSubordinateClauseExercises(level);
  final extended = getExtendedExercises('clause', level);
  return [...base, ...?extended];
}

List<Map<String, dynamic>> getAllPassiveExercises(String level) {
  final base = getPassiveExercises(level);
  final extended = getExtendedExercises('passive', level);
  return [...base, ...?extended];
}

List<Map<String, dynamic>> getAllKonjunktivExercises(String level) {
  final base = getKonjunktivExercises(level);
  final extended = getExtendedExercises('konjunktiv', level);
  return [...base, ...?extended];
}

List<Map<String, dynamic>> getAllPrepositionExercises(String level) {
  final base = getPrepositionExercises(level);
  final extended = getExtendedExercises('preposition', level);
  return [...base, ...?extended];
}

List<Map<String, dynamic>> getAllSentenceStructureExercises(String level) {
  final base = getSentenceStructureExercises(level);
  final extended = getExtendedExercises('complex', level);
  return [...base, ...?extended];
}

/// 统计题库总数（包括扩展）
int getTotalExerciseCount() {
  final baseCount = kasusExercisesA2.length +
      kasusExercisesB1.length +
      kasusExercisesB2.length +
      kasusExercisesC1.length +
      verbConjugationA1.length +
      verbConjugationA2.length +
      adjectiveEndingA2.length +
      subordinateClauseB1.length +
      passiveVoiceB1.length +
      prepositionA2.length +
      konjunktivB2.length +
      sentenceStructureB1.length +
      sentenceStructureC1.length;

  final extendedCount = getExtendedExerciseCount().values.reduce((a, b) => a + b);

  return baseCount + extendedCount;
}

/// 统计扩展题库数量
Map<String, int> getExtendedExerciseCount() {
  // TODO: 实现扩展题库后，替换为实际变量
  return {
    'verb': 0,
    'clause': 0,
    'gender': 0,
    'preposition': 0,
    'passive': 0,
    'complex': 0,
  };
}
